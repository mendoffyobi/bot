<!-- シミュレーション:meter2.html start -->
  <div class="row">
    &nbsp;
  </div>
  <h3><span id="keyword"></span></h3>
  <div class="row">
    &nbsp;
  </div>
  <div class="row">
    <div class="col-sm-1"><font size="5">ご契約種別</font></div>
    <div class="col-sm-11">
      <select id="type" class="big" size="40">
        <option value="" selected="selected">ご契約種別を選択してください</option>
        <option value="従量電灯A">従量電灯A</option>
        <option value="従量電灯B">従量電灯B</option>
        <option value="低圧電力">低圧電力</option>
      </select>
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
  <div id="dispSize1">
    <div class="row">
      <div class="col-sm-1">
        <font size="5">ご契約容量(単位:<span id="unit"></span>)</font>
      </div>
      <div class="col-sm-11">
        <select id="size" class="big" size="40">
          <option value="" selected="selected">選択してください</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
        </select>
      </div>
    </div>
  </div>
  <div id="dispSize2">
    <div class="row">
      <div class="col-sm-1">
        <font size="5">ご契約容量(単位:kW)</font>
      </div>
      <div class="col-sm-11">
        <select id="size2" class="big" size="40">
          <option value="" selected="selected">選択してください</option>
          <option value="0.5">0.5</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
        </select>
      </div>
    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row" style="display:none;">
      <div class="col-sm-1">
        <font size="5">力率</font>
      </div>
      <div class="col-sm-11">
        <select id="PF" class="big" size="40">
          <option value="" selected="selected">選択してください</option>
          <option value="90">90%</option>
          <option value="85">85%</option>
          <option value="80">80%</option>
        </select>
      </div>
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
  <div class="row">
    <div class="col-sm-1"><font size="5">検針月</font></div>
    <div class="col-sm-11">
      <select id="month" class="big" size="40">
        <option value="" selected="selected">検針月を選択してください</option>
        <option value="1" >1月</option>
        <option value="2" >2月</option>
        <option value="3" >3月</option>
        <option value="4" >4月</option>
        <option value="5" >5月</option>
        <option value="6" >6月</option>
        <option value="7" >7月</option>
        <option value="8" >8月</option>
        <option value="9" >9月</option>
        <option value="10">10月</option>
        <option value="11">11月</option>
        <option value="12">12月</option>
      </select>
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
  <div class="row">
    <div class="col-sm-1"><font size="5">ご使用量(kWh)</font></div>
    <div class="col-sm-11">
      <input type="text" id="amount" class="big" size="40">
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
  <div class="row">
    <div class="col-sm-1"></div>
    <div class="col-sm-11">
      <button type="button" class="btn btn-lg btn-success" onClick="sendMsg();">決定</button>
      <input type="hidden" id="image">
    </div>
  </div>
  <div class="row">
    &nbsp;
  </div>
  <script>
    function sendMsg() {
      let msg = "";
      let size = "";
      let unit = "";
      let pf = "";
      if ($("#type").val() == "") {
        msg += "ご契約種別を選択してください\n";
      }
      if ($("#type").val() == "従量電灯B") {
        size = $("#size").val();
        unit = $("#unit").text();
        if (size == "") {
          msg += "ご契約容量を選択してください";
        }
      }
      if ($("#type").val() == "低圧電力") {
        pf = $("#PF").val();
        size = $("#size2").val();
        unit = $("#unit").text();
        if (size == "") {
          msg += "ご契約容量を選択してください";
        }
      }
      if ($("#month").val() == "") {
        msg += "検針月を選択してください\n";
      }
      if ($("#amount").val() == "") {
        msg += "ご使用量を入力してください\n";
      }
      if (msg) {
        alert(msg);
        return false;
      }
      var text = "入力-";
      text += $("#keyword").text() + ":";
      text += "ご契約種別[" + $("#type").val() + "]|";
      text += "ご契約容量[" + size + "]|";
      text += "ご契約容量単位[" + unit + "]|";
      text += "検針月[" + $("#month").val() + "]|";
      text += "ご使用量[" + $("#amount").val() + "]|";
      text += "力率[" + pf + "]|";
      liff.sendMessages([
        {
          "type": "text",
          "text":  text
        }
      ])
      .then(() => {
        liff.closeWindow();
      })
      .catch((err) => {
        alert(err);
        liff.closeWindow();
      });
    }
    function makeType() {
      $('#type').change(function() {
        let val = $(this).val();
        if (val == "従量電灯B") {
          $("#dispSize1").show();
          $("#dispSize2").hide();
          $("#unit").text("kVA");
        } else if (val == "低圧電力") {
          $("#dispSize1").hide();
          $("#dispSize2").show();
          $("#unit").text("kW");
        } else {
          $("#dispSize1").hide();
          $("#dispSize2").hide();
        }
      });
      $('#type').change();
    }
  </script>
<!-- シミュレーション:meter2.html end -->
